(this["webpackJsonpchat-app-web"]=this["webpackJsonpchat-app-web"]||[]).push([[0],{211:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);a(201);var n=a(0),r=a.n(n),c=a(30),s=a.n(c),o=a(90),i=a(31),u=a(29),b=(a(211),a(169)),j=a(77),l=a(40),p=a(184),d=a.n(p),O=a(197),h=a(26),m=a(48),g=Object(m.b)({hashType:"hashbang"});function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.b)(Object(h.a)({router:Object(o.b)(g)},e));return t}var f=a(134),y=a(309),E=a(306),k=a(102),v=a(59),C=a(81),S=a(308),w=a(307),R=a(313),_=a(64),L=a(33),T=a(311),P=a(312),I=a(6),A={labelCol:{span:8},wrapperCol:{span:16}},M={wrapperCol:{offset:8,span:16}},U=function(e){var t=e.form,a=e.isModalVisible,n=e.handleOk,r=e.handleCancel;return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(T.a,{title:"Create Chat Topic",centered:!0,visible:a,onOk:n,onCancel:r,footer:null,children:Object(I.jsx)(y.a,Object(h.a)(Object(h.a)({},A),{},{form:t,onFinish:n,children:Object(I.jsx)(k.a,{align:"middle",justify:"center",children:Object(I.jsxs)(v.a,{span:16,children:[Object(I.jsx)(y.a.Item,{label:"Topic Name",name:"topic",rules:[{required:!0,message:"Please input your topic name!"}],children:Object(I.jsx)(P.a,{})}),Object(I.jsx)(y.a.Item,Object(h.a)(Object(h.a)({},M),{},{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]})})}))})})},F=a(189),N=a.n(F),H=a(305),G="app/MessagePage/MESSAGE_REQUEST",V="app/MessagePage/MESSAGE_SUCCESS",q="app/MessagePage/MESSAGE_ERROR",D="app/MessagePage/NEW_MESSAGE_REQUEST",Q="app/MessagePage/NEW_MESSAGE_SUCCESS",z="app/MessagePage/NEW_MESSAGE_ERROR",X="app/MessagePage/NEW_SOCKET_MESSAGE_SUCCESS";var W=a(61),K={content:null,isLoading:!1,error:{},messages:[],slug:null,message:{}},B=Object(W.a)((function(e,t){switch(t.type){case G:e.slug=t.slug,e.isLoading=!0;break;case V:e.messages=t.messages,e.isLoading=!1;break;case q:e.isLoading=!1,e.error=t.error;break;case D:e.isLoading=!0,e.content=t.content;break;case Q:e.message=t.message,e.isLoading=!1;break;case z:e.isLoading=!1,e.error=t.error;break;case X:e.messages.push(t.message);break;default:return e}}),K),Y=a(27),J=a.n(Y),Z=a(22),$=a(146),ee=a.n($),te=ee.a.create(),ae="https://chat-app-api-1.herokuapp.com";te.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e}));var ne=function(e){return ee.a.post("".concat(ae,"/login"),{user:e}).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},re=function(e){return ee.a.post("".concat(ae,"/signup"),{user:e}).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},ce=function(){return te.get("".concat(ae,"/user")).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},se=function(){return te.get("".concat(ae,"/chatrooms")).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},oe=function(e){return te.post("".concat(ae,"/chatrooms"),{chatroom:e}).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},ie=function(e){return te.get("".concat(ae,"/chatrooms/").concat(e,"/messages")).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},ue=function(e,t){return te.post("".concat(ae,"/chatrooms/").concat(e,"/messages"),{message:{content:t}}).then((function(e){return e.data})).catch((function(e){return e.response.data||e.response}))},be=function(e){return e.messageList||K},je=function(){return Object(L.a)(be,(function(e){return e.slug}))},le=J.a.mark(Oe),pe=J.a.mark(he),de=J.a.mark(me);function Oe(){var e,t,a;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Z.c)(je());case 2:return e=n.sent,n.prev=3,n.next=6,Object(Z.a)(ie,e);case 6:if(t=n.sent,a=t.data,!t.success){n.next=12;break}return n.next=12,Object(Z.b)((r=a.messages,{type:V,messages:r}));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.log("Error => ",n.t0);case 17:case"end":return n.stop()}var r}),le,null,[[3,14]])}function he(){var e,t,a,n;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Z.c)(je());case 2:return e=r.sent,r.next=5,Object(Z.c)(Object(L.a)(be,(function(e){return e.content})));case 5:return t=r.sent,r.prev=6,r.next=9,Object(Z.a)(ue,e,t);case 9:if(a=r.sent,n=a.data,!a.success){r.next=15;break}return r.next=15,Object(Z.b)((c=n.message,{type:Q,message:c}));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),console.log("Error => ",r.t0);case 20:case"end":return r.stop()}var c}),pe,null,[[6,17]])}function me(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(G,Oe);case 2:return e.next=4,Object(Z.d)(D,he);case 4:case"end":return e.stop()}}),de)}var ge=P.a.TextArea,xe={labelCol:{span:8},wrapperCol:{span:16}},fe="messageList",ye=function(){Object(l.b)({key:fe,reducer:B}),Object(l.c)({key:fe,saga:me});var e=Object(i.d)(),t=Object(L.b)({messages:Object(L.a)(be,(function(e){return e.messages}))}),a=Object(i.e)(t).messages,r=Object(n.useRef)(null),c=Object(u.g)().slug,s=y.a.useForm(),o=Object(f.a)(s,1)[0];return Object(n.useEffect)((function(){var t=N.a.createConsumer("wss://chat-app-api-1.herokuapp.com/cable").subscriptions.create({channel:"MessagesChannel",chatroom_slug:"messages_".concat(c)},{connected:function(){console.log("connected!")},disconnected:function(){console.log("disconnected")},received:function(t){var a,n;e((n=t.message,{type:X,message:n})),console.log("inputEl: ",r),null===(a=r.current)||void 0===a||a.scrollIntoView()}});return function(){t.consumer.disconnect()}}),[c,e]),Object(n.useEffect)((function(){e(function(e){return{slug:e,type:G}}(c)),setTimeout((function(){return r.current.scrollIntoView()}),500)}),[c,e]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("h3",{children:["Chat Room: ",c]}),Object(I.jsx)(w.b,{style:{height:"calc(100vh - 400px)",overflow:"auto"},header:"".concat(a.length," replies"),dataSource:a,footer:Object(I.jsx)("div",{ref:r}),renderItem:function(e){return Object(I.jsx)(H.a,{actions:e.actions,author:e.user.username,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:e.content,datetime:e.created_at})}}),Object(I.jsxs)(y.a,Object(h.a)(Object(h.a)({},xe),{},{name:"basic",onFinish:function(t){var a;e((a=t.content,{type:D,content:a})),o.resetFields()},form:o,children:[Object(I.jsx)(y.a.Item,{wrapperCol:{span:24},name:"content",rules:[{required:!0,message:"Please input your message!"}],children:Object(I.jsx)(ge,{rows:2,placeholder:"Message..."})}),Object(I.jsx)(y.a.Item,{wrapperCol:{span:24},style:{textAlign:"right"},children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:" Submit "})})]}))]})},Ee="app/ChatPage/OPEN_MODAL_REQUEST",ke="app/ChatPage/CLOSE_MODAL_REQUEST",ve="app/ChatPage/CHAT_REQUEST",Ce="app/ChatPage/CHAT_SUCCESS",Se="app/ChatPage/CHAT_ERROR",we="app/ChatPage/CHAT_CREATE_REQUEST",Re="app/ChatPage/CHAT_CREATE_SUCCESS",_e="app/ChatPage/CHAT_CREATE_ERROR";function Le(e,t){return{type:Re,chatroom:e,message:t}}function Te(e,t){return{type:_e,error:e,message:t}}var Pe={rooms:[],isLoading:!1,error:{},topic:{},message:"",modalOpen:!1},Ie=Object(W.a)((function(e,t){switch(t.type){case ve:e.isLoading=!0;break;case Ce:e.rooms=t.rooms,e.isLoading=!1;break;case Se:e.error=t.error,e.isLoading=!1;break;case we:e.isLoading=!0,e.topic=t.topic;break;case Re:e.rooms.splice(0,0,t.chatroom),e.message=t.message,e.isLoading=!1,e.modalOpen=!1;break;case _e:e.error=t.error,e.message=t.message,e.isLoading=!0;break;case Ee:e.modalOpen=!0;break;case ke:e.modalOpen=!1;break;default:return e}}),Pe),Ae=a(200),Me=function(e){return e.chatroom||Pe},Ue=J.a.mark(He),Fe=J.a.mark(Ge),Ne=J.a.mark(Ve);function He(){var e,t;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Z.a)(se);case 3:if(e=a.sent,t=e.data,!e.success){a.next=9;break}return a.next=9,Object(Z.b)((n=t.rooms,{type:Ce,rooms:n}));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("Error => ",a.t0);case 14:case"end":return a.stop()}var n}),Ue,null,[[0,11]])}function Ge(){var e,t,a,n,r;return J.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Z.c)(Object(L.a)(Me,(function(e){return e.topic})));case 2:return e=c.sent,c.prev=3,c.next=6,Object(Z.a)(oe,e);case 6:if(t=c.sent,a=t.data,n=t.success,r=t.message,!n){c.next=16;break}return c.next=13,Object(Z.b)(Le(a.chatroom,r));case 13:Ae.a.info({description:r,placement:"bottomRight"}),c.next=19;break;case 16:return c.next=18,Object(Z.b)(Te({},r));case 18:Ae.a.error({message:r,placement:"bottomRight"});case 19:c.next=27;break;case 21:return c.prev=21,c.t0=c.catch(3),console.log("Error => ",c.t0),c.next=26,Object(Z.b)(Te(c.t0,""));case 26:Ae.a.error({message:c.t0,placement:"bottomRight"});case 27:case"end":return c.stop()}}),Fe,null,[[3,21]])}function Ve(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(ve,He);case 2:return e.next=4,Object(Z.d)(we,Ge);case 4:case"end":return e.stop()}}),Ne)}var qe="chatroom",De=function(){Object(l.b)({key:qe,reducer:Ie}),Object(l.c)({key:qe,saga:Ve});var e=Object(i.d)(),t=Object(L.b)({rooms:Object(L.a)(Me,(function(e){return e.rooms})),isModalVisible:Object(L.a)(Me,(function(e){return e.modalOpen}))}),a=Object(i.e)(t),r=a.rooms,c=a.isModalVisible,s=Object(u.h)(),o=s.path,b=s.url,j=y.a.useForm(),p=Object(f.a)(j,1)[0];return Object(n.useEffect)((function(){e({type:ve})}),[e]),Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(E.a,{style:{marginTop:20},children:Object(I.jsxs)(k.a,{gutter:[16,16],justify:"center",style:{height:"250px"},children:[Object(I.jsxs)(v.a,{span:24,children:[Object(I.jsx)(k.a,{gutter:[16,16],align:"middle",justify:"end",children:Object(I.jsx)(v.a,{children:Object(I.jsx)(C.a,{type:"primary",onClick:function(){return e({type:Ee})},children:"Create Topic"})})}),Object(I.jsx)(U,{form:p,isModalVisible:c,handleOk:function(t){return e(function(e){return{type:we,topic:e}}(t))},handleCancel:function(){return e({type:ke})}})]}),Object(I.jsx)(v.a,{span:24,children:Object(I.jsxs)(k.a,{gutter:[16,16],align:"stretch",justify:"center",children:[Object(I.jsx)(v.a,{span:8,children:Object(I.jsxs)(S.a,{children:[Object(I.jsx)("h3",{children:"Select Chat Room"}),Object(I.jsx)(w.b,{header:"".concat(r.length," chat rooms"),size:"small",itemLayout:"horizontal",dataSource:r,style:{height:"calc(100vh - 270px)",overflowY:"scroll"},renderItem:function(e){return Object(I.jsx)(w.b.Item,{children:Object(I.jsx)(w.b.Item.Meta,{avatar:Object(I.jsx)(R.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:Object(I.jsx)(_.a,{to:"".concat(b,"/").concat(e.slug),children:e.topic})})})}})]})}),Object(I.jsx)(v.a,{flex:"auto",children:Object(I.jsx)(S.a,{children:r.length<=0?Object(I.jsx)("h3",{children:" No topic found "}):Object(I.jsxs)(u.d,{children:[Object(I.jsx)(u.b,{exact:!0,path:o,component:function(){return Object(I.jsx)("h3",{children:"Please select a chat topic."})}}),Object(I.jsx)(u.b,{path:"".concat(o,"/:slug"),component:ye})]})})})]})})]})})})},Qe=a(310),ze="app/LoginPage/LOGIN_REQUEST",Xe="app/LoginPage/LOGIN_SUCCESS",We="app/LoginPage/LOGIN_ERROR";function Ke(e){return{type:We,error:e}}var Be={body:{},isLoading:!1,error:{}},Ye=Object(W.a)((function(e,t){switch(t.type){case ze:e.body=t.user,e.isLoading=!0;break;case Xe:e.isLoading=!1;break;case We:e.body=t.error,e.isLoading=!1;break;default:return e}}),Be),Je="app/StartUpPage/CHECK_LOGIN_REQUEST",Ze="app/StartUpPage/CHECK_LOGIN_SUCCESS",$e="app/StartUpPage/CHECK_LOGIN_ERROR";function et(e,t){return{type:Ze,token:t,user:e}}function tt(e){return{type:$e,error:e}}var at=function(e){return e.auth||Be},nt=J.a.mark(ct),rt=J.a.mark(st);function ct(){var e,t,a,n,r;return J.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Z.c)(Object(L.a)(at,(function(e){return e.body})));case 2:return e=c.sent,c.prev=3,c.next=6,Object(Z.a)(ne,e);case 6:if(t=c.sent,a=t.data,n=t.success,r=t.message,!n){c.next=19;break}return localStorage.setItem("token",a.token),c.next=14,Object(Z.b)({type:Xe});case 14:return c.next=16,Object(Z.b)(et(a.user,a.token));case 16:Ae.a.info({description:r,placement:"bottomRight"}),c.next=22;break;case 19:return c.next=21,Object(Z.b)(Ke({}));case 21:Ae.a.error({description:r,placement:"bottomRight"});case 22:c.next=30;break;case 24:return c.prev=24,c.t0=c.catch(3),console.log("Error => ",c.t0),c.next=29,Object(Z.b)(Ke(c.t0));case 29:Ae.a.info({description:c.t0,placement:"bottomRight"});case 30:case"end":return c.stop()}}),nt,null,[[3,24]])}function st(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(ze,ct);case 2:case"end":return e.stop()}}),rt)}var ot=E.a.Content,it={labelCol:{span:8},wrapperCol:{span:16}},ut={wrapperCol:{offset:8,span:16}},bt="auth",jt=function(){Object(l.b)({key:bt,reducer:Ye}),Object(l.c)({key:bt,saga:st});var e=Object(i.d)();return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(ot,{style:{padding:"0 50px",marginTop:64},children:Object(I.jsx)(k.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(I.jsxs)(v.a,{span:10,children:[Object(I.jsx)(Qe.a.Title,{children:"Welcome to Chat App"}),Object(I.jsxs)(y.a,Object(h.a)(Object(h.a)({},it),{},{initialValues:{username:"test",password:"test"},onFinish:function(t){return e(function(e){return{user:e,type:ze}}(t))},children:[Object(I.jsx)(y.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(I.jsx)(P.a,{})}),Object(I.jsx)(y.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(I.jsx)(P.a.Password,{})}),Object(I.jsx)(y.a.Item,Object(h.a)(Object(h.a)({},ut),{},{children:Object(I.jsxs)(Qe.a.Paragraph,{children:["Don't you have an account? ",Object(I.jsx)(_.a,{to:"/register",children:" Register here"})]})})),Object(I.jsx)(y.a.Item,Object(h.a)(Object(h.a)({},ut),{},{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Login"})}))]}))]})})})})},lt="app/RegisterPage/REGISTER_REQUEST",pt="app/RegisterPage/REGISTER_SUCCESS",dt="app/RegisterPage/REGISTER_ERROR";function Ot(e,t){return{type:pt,user:e,message:t}}var ht={body:{},message:"",isLoading:!1,error:{},user:{}},mt=Object(W.a)((function(e,t){switch(t.type){case lt:e.body=t.body,e.isLoading=!0;break;case pt:e.message=t.message,e.user=t.user,e.isLoading=!1;break;case dt:e.body=t.error,e.message=t.message,e.isLoading=!1;break;default:return e}}),ht),gt=a(41),xt=function(e){return e.register||ht},ft=J.a.mark(Et),yt=J.a.mark(kt);function Et(){var e,t,a,n,r;return J.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Z.c)(Object(L.a)(xt,(function(e){return e.body})));case 2:return e=c.sent,c.prev=3,c.next=6,Object(Z.a)(re,e);case 6:if(t=c.sent,a=t.data,n=t.success,r=t.message,!n){c.next=18;break}return c.next=13,Object(Z.b)(Ot(a.user,r));case 13:return c.next=15,Object(Z.b)(Object(gt.d)("/login"));case 15:Ae.a.info({description:r,placement:"bottomRight"}),c.next=21;break;case 18:return c.next=20,Object(Z.b)({type:dt,error:{}});case 20:Ae.a.error({message:r,placement:"bottomRight"});case 21:c.next=27;break;case 23:c.prev=23,c.t0=c.catch(3),console.log("Error => ",c.t0),Ae.a.error({message:c.t0,placement:"bottomRight"});case 27:case"end":return c.stop()}}),ft,null,[[3,23]])}function kt(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(lt,Et);case 2:case"end":return e.stop()}}),yt)}var vt=E.a.Content,Ct={labelCol:{span:8},wrapperCol:{span:16}},St={wrapperCol:{offset:8,span:16}},wt="register",Rt=function(){Object(l.b)({key:wt,reducer:mt}),Object(l.c)({key:wt,saga:kt});var e=Object(i.d)();return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(vt,{style:{padding:"0 50px",marginTop:64},children:Object(I.jsx)(k.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(I.jsxs)(v.a,{span:10,children:[Object(I.jsx)(Qe.a.Title,{children:"Welcome to Chat App"}),Object(I.jsxs)(y.a,Object(h.a)(Object(h.a)({},Ct),{},{name:"basic",initialValues:{username:"test",password:"test",first_name:"hi",last_name:"there"},onFinish:function(t){return e({body:t,type:lt})},children:[Object(I.jsx)(y.a.Item,{label:"First Name",name:"first_name",rules:[{required:!0,message:"Please input your first name!"}],children:Object(I.jsx)(P.a,{})}),Object(I.jsx)(y.a.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,message:"Please input your last name!"}],children:Object(I.jsx)(P.a,{})}),Object(I.jsx)(y.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(I.jsx)(P.a,{})}),Object(I.jsx)(y.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(I.jsx)(P.a.Password,{})}),Object(I.jsx)(y.a.Item,Object(h.a)(Object(h.a)({},St),{},{children:Object(I.jsxs)(Qe.a.Paragraph,{children:["Already have an account?   ",Object(I.jsx)(_.a,{to:"/",children:" Login here"})]})})),Object(I.jsx)(y.a.Item,Object(h.a)(Object(h.a)({},St),{},{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))]})})})})},_t=a(158),Lt=a(314),Tt={token:"",isLoading:!1,isLogged:!1,error:{},user:{}},Pt=Object(W.a)((function(e,t){switch(t.type){case Je:e.token=t.token,e.isLoading=!0;break;case Ze:e.token=t.token,e.user=t.user,e.isLogged=!0,e.isLoading=!1;break;case $e:e.body=t.error,e.isLoading=!1;break;default:return e}}),Tt),It=function(e){return e.root||Tt},At=["component"],Mt=["component","restricted"],Ut=E.a.Header,Ft=E.a.Footer,Nt=E.a.Content,Ht=Object(L.b)({isLogged:Object(L.a)(It,(function(e){return e.isLogged}))}),Gt=function(e){var t=e.component,a=Object(_t.a)(e,At),n=Object(i.e)(Ht).isLogged;return Object(I.jsx)(u.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return n?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(E.a,{children:[Object(I.jsx)(Ut,{style:{position:"fixed",zIndex:1,width:"100%"},children:Object(I.jsxs)(k.a,{justify:"space-between",children:[Object(I.jsxs)(v.a,{span:10,children:[Object(I.jsx)("div",{className:"logo"}),Object(I.jsxs)(Lt.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"],children:[Object(I.jsx)(Lt.a.Item,{children:"Home"},"1"),Object(I.jsx)(Lt.a.Item,{children:"Feeds"},"2")]})]}),Object(I.jsx)(v.a,{span:8,children:Object(I.jsx)(k.a,{justify:"end",children:Object(I.jsx)(v.a,{children:Object(I.jsxs)(Lt.a,{theme:"dark",mode:"horizontal",children:[Object(I.jsx)(Lt.a.Item,{children:"Profile"},"3"),Object(I.jsx)(Lt.a.Item,{children:"Logout"},"4")]})})})})]})}),Object(I.jsx)(Nt,{style:{padding:"0 50px",marginTop:64,minHeight:"calc(100vh - 120px)"},children:Object(I.jsx)(t,Object(h.a)({},e))}),Object(I.jsx)(Ft,{style:{textAlign:"center"},children:"ChatApp \xa92021 Created by Robiul Hassan"})]})}):Object(I.jsx)(u.a,{to:"/login"})}}))},Vt=function(e){var t=e.component,a=(e.restricted,Object(_t.a)(e,Mt)),n=Object(i.e)(Ht).isLogged;return Object(I.jsx)(u.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return n?Object(I.jsx)(u.a,{to:"/chat"}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(E.a,{children:[Object(I.jsx)(Ut,{children:Object(I.jsx)("div",{className:"logo"})}),Object(I.jsx)(t,Object(h.a)({},e)),Object(I.jsx)(Ft,{style:{textAlign:"center"},children:"ChatApp \xa92021 Created by Robiul Hassan"})]})})}}))},qt=J.a.mark(Qt),Dt=J.a.mark(zt);function Qt(){var e,t,a;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Z.c)(Object(L.a)(It,(function(e){return e.token})));case 2:return e=n.sent,n.prev=3,n.next=6,Object(Z.a)(ce);case 6:if(t=n.sent,a=t.data,!t.success){n.next=14;break}return n.next=12,Object(Z.b)(et(a.user,e));case 12:n.next=16;break;case 14:return n.next=16,Object(Z.b)(tt({}));case 16:n.next=23;break;case 18:return n.prev=18,n.t0=n.catch(3),console.log("Error => ",n.t0),n.next=23,Object(Z.b)(tt(n.t0));case 23:case"end":return n.stop()}}),qt,null,[[3,18]])}function zt(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(Je,Qt);case 2:case"end":return e.stop()}}),Dt)}var Xt="root",Wt=function(e){Object(l.b)({key:Xt,reducer:Pt}),Object(l.c)({key:Xt,saga:zt});var t=Object(i.d)();return Object(n.useEffect)((function(){return t((e=localStorage.getItem("token"),{type:Je,token:e}));var e}),[t]),e.children},Kt=function(e){var t=j.c;"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&(t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}));var a=Object(O.a)({}),n=a.run,r=[a,Object(b.a)(e),d.a],c=[j.a.apply(void 0,r),Object(l.a)({createReducer:x,runSaga:n})];return Object(j.d)(x(),t.apply(void 0,c))}(g);var Bt=function(){return Object(I.jsx)(i.a,{store:Kt,children:Object(I.jsx)(o.a,{history:g,children:Object(I.jsx)(Wt,{children:Object(I.jsxs)(u.d,{children:[Object(I.jsx)(Vt,{exact:!0,path:"/login",component:jt}),Object(I.jsx)(Vt,{exact:!0,path:"/register",component:Rt}),Object(I.jsx)(Gt,{path:"/chat",component:De}),Object(I.jsx)(u.a,{to:"/login",from:"/"}),Object(I.jsx)(Vt,{path:"*",exact:!0,component:jt})]})})})})},Yt=(a(302),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,315)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))});s.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(Bt,{})}),document.getElementById("root")),Yt()}},[[303,1,2]]]);
//# sourceMappingURL=main.928295f9.chunk.js.map