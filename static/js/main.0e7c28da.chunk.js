(this["webpackJsonpchat-app-web"]=this["webpackJsonpchat-app-web"]||[]).push([[0],{162:function(e,t,c){},263:function(e,t,c){},264:function(e,t,c){"use strict";c.r(t);c(157);var n=c(0),a=c.n(n),s=c(25),o=c.n(s),r=c(45),i=c(23),l=(c(162),c(81)),j=c(272),b=c(72),d=c(43),h=c(270),O=c(268),u=c(49),p=c.n(u),m=Object({NODE_ENV:"production",PUBLIC_URL:"/chat-app-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_HOST||"http://localhost:4000",x=Object({NODE_ENV:"production",PUBLIC_URL:"/chat-app-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).WS_HOST||"ws://localhost:4000/cable",g=c(27),f=c(154),y=c(141),C=c.n(y),T=c(271),S=c(269),_=c(267),w=c(266),v=c(153),P=c(6),E=T.a.TextArea,I={labelCol:{span:8},wrapperCol:{span:16}},F={wrapperCol:{offset:8,span:16}},H=function(){var e=Object(i.g)().slug,t=S.a.useForm(),c=Object(l.a)(t,1)[0],a=Object(n.useState)([]),s=Object(l.a)(a,2),o=s[0],r=s[1];Object(n.useEffect)((function(){C.a.createConsumer(x).subscriptions.create({channel:"MessagesChannel",chatroom_slug:"messages_".concat(e)},{connected:function(){console.log("connected!")},disconnected:function(){console.log("disconnected")},received:function(e){console.log("socket data----------------",e),r((function(t){return[].concat(Object(f.a)(t),[e.message])}))}})}),[e]),Object(n.useEffect)((function(){p.a.get("".concat(m,"/chatrooms/").concat(e,"/messages")).then((function(e){var t=e.data.data;console.log("messages-------, ",t),r(t.messages)})).catch((function(e){console.log("err: ",e.response)}))}),[e]);return Object(P.jsxs)("div",{children:[Object(P.jsxs)("h3",{children:["Chat Room: ",e]}),Object(P.jsx)(_.b,{className:"comment-list",header:"".concat(o.length," replies"),itemLayout:"horizontal",dataSource:o,renderItem:function(e){return Object(P.jsx)("li",{children:Object(P.jsx)(w.a,{actions:e.actions,author:e.user.username,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:e.content,datetime:e.created_at})})}}),Object(P.jsxs)(S.a,Object(g.a)(Object(g.a)({},I),{},{name:"basic",onFinish:function(t){console.log("Success:",t),p.a.post("".concat(m,"/chatrooms/").concat(e,"/messages"),{message:{content:t.content,user_id:2}}).then((function(e){console.log(e),console.log(e.data),c.resetFields()})).catch((function(e){console.log("err: ",e.response)}))},form:c,children:[Object(P.jsx)(S.a.Item,{name:"content",rules:[{required:!0,message:"Please input your message!"}],children:Object(P.jsx)(E,{rows:4})}),Object(P.jsx)(S.a.Item,Object(g.a)(Object(g.a)({},F),{},{children:Object(P.jsx)(v.a,{type:"primary",htmlType:"submit",children:" Submit "})}))]}))]})},A=j.a.Header,D=j.a.Content,L=function(){var e=Object(i.h)(),t=e.path,c=e.url,a=Object(n.useState)([]),s=Object(l.a)(a,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){p.a.get("".concat(m,"/chatrooms")).then((function(e){var t=e.data.data;u(t.rooms)})).catch((function(e){console.log("err: ",e.response)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(j.a,{children:[Object(P.jsx)(A,{children:Object(P.jsx)("div",{className:"logo"})}),Object(P.jsx)(D,{style:{padding:"0 50px",marginTop:64},children:Object(P.jsx)(b.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(P.jsxs)(d.a,{span:24,children:[Object(P.jsx)(h.a.Title,{children:"Welcome to Chat App"}),Object(P.jsxs)(b.a,{children:[Object(P.jsxs)(d.a,{span:24,children:["  ",Object(P.jsx)("h2",{children:"Chat Topic"})," "]}),Object(P.jsx)(d.a,{span:10,children:Object(P.jsx)(O.a,{children:Object(P.jsx)("ul",{children:o.map((function(e,t){return Object(P.jsx)("li",{children:Object(P.jsx)(r.b,{to:"".concat(c,"/").concat(e.slug),children:e.topic})},t)}))})})}),Object(P.jsx)(d.a,{span:14,children:Object(P.jsx)(O.a,{children:Object(P.jsxs)(i.d,{children:[Object(P.jsx)(i.b,{exact:!0,path:t,component:function(){return Object(P.jsx)("h3",{children:"Please select a chat topic."})}}),Object(P.jsx)(i.b,{path:"".concat(t,"/:slug"),component:H})]})})})]}),","]})})})]}),Object(P.jsx)(r.b,{to:"/",children:"Go Back"})]})},R=j.a.Header,N=j.a.Content,W={labelCol:{span:8},wrapperCol:{span:16}},q={wrapperCol:{offset:8,span:16}},K=function(e){var t=e.history;return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(j.a,{children:[Object(P.jsx)(R,{children:Object(P.jsx)("div",{className:"logo"})}),Object(P.jsx)(N,{style:{padding:"0 50px",marginTop:64},children:Object(P.jsx)(b.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(P.jsxs)(d.a,{span:10,children:[Object(P.jsx)(h.a.Title,{children:"Welcome to Chat App"}),Object(P.jsxs)(S.a,Object(g.a)(Object(g.a)({},W),{},{name:"login-form",initialValues:{username:"test",password:"test"},onFinish:function(e){p.a.post("".concat(m,"/login"),{user:e}).then((function(e){t.push("/chat")})).catch((function(e){console.log("err: ",e.response)}))},children:[Object(P.jsx)(S.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(P.jsx)(T.a,{})}),Object(P.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(P.jsx)(T.a.Password,{})}),Object(P.jsx)(S.a.Item,Object(g.a)(Object(g.a)({},q),{},{children:Object(P.jsxs)(h.a.Paragraph,{children:["Don't you have an account?   ",Object(P.jsx)(r.b,{to:"/register",children:" Register here"})]})})),Object(P.jsx)(S.a.Item,Object(g.a)(Object(g.a)({},q),{},{children:Object(P.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Login"})}))]}))]})})})]})})},U=j.a.Header,B=j.a.Content,V={labelCol:{span:8},wrapperCol:{span:16}},k={wrapperCol:{offset:8,span:16}},z=function(){return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(j.a,{children:[Object(P.jsx)(U,{children:Object(P.jsx)("div",{className:"logo"})}),Object(P.jsx)(B,{style:{padding:"0 50px",marginTop:64},children:Object(P.jsx)(b.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(P.jsxs)(d.a,{span:18,children:[Object(P.jsx)(h.a.Title,{children:"Welcome to Chat App"}),Object(P.jsxs)(S.a,Object(g.a)(Object(g.a)({},V),{},{name:"basic",initialValues:{username:"test",password:"test",first_name:"hi",last_name:"there"},onFinish:function(e){console.log("Success:",e),p.a.post("".concat(m,"/signup"),{user:e}).then((function(e){console.log(e),console.log(e.data)})).catch((function(e){console.log("err: ",e.response)}))},children:[Object(P.jsx)(S.a.Item,{label:"First Name",name:"first_name",rules:[{required:!0,message:"Please input your first name!"}],children:Object(P.jsx)(T.a,{})}),Object(P.jsx)(S.a.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,message:"Please input your last name!"}],children:Object(P.jsx)(T.a,{})}),Object(P.jsx)(S.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(P.jsx)(T.a,{})}),Object(P.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(P.jsx)(T.a.Password,{})}),Object(P.jsx)(S.a.Item,Object(g.a)(Object(g.a)({},k),{},{children:Object(P.jsxs)(h.a.Paragraph,{children:["Already have an account?   ",Object(P.jsx)(r.b,{to:"/",children:" Login here"})]})})),Object(P.jsx)(S.a.Item,Object(g.a)(Object(g.a)({},k),{},{children:Object(P.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))]})})})]})})};var J=function(){return Object(P.jsx)(r.a,{children:Object(P.jsxs)(i.d,{children:[Object(P.jsx)(i.b,{exact:!0,path:"/login",component:K}),Object(P.jsx)(i.b,{exact:!0,path:"/register",component:z}),Object(P.jsx)(i.b,{path:"/chat",component:L}),Object(P.jsx)(i.a,{to:"/login",from:"/"}),Object(P.jsx)(i.b,{path:"*",exact:!0,component:K})]})})},M=(c(263),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,273)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),s(e),o(e)}))});o.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(J,{})}),document.getElementById("root")),M()}},[[264,1,2]]]);
//# sourceMappingURL=main.0e7c28da.chunk.js.map