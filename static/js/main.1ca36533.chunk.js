(this["webpackJsonpchat-app-web"]=this["webpackJsonpchat-app-web"]||[]).push([[0],{175:function(e,t,c){},276:function(e,t,c){},277:function(e,t,c){"use strict";c.r(t);c(170);var a=c(0),n=c.n(a),s=c(24),r=c.n(s),o=c(46),i=c(25),l=(c(175),c(116)),j=c(69),b=c(286),h=c(282),d=c(169),p=c(80),u=c(44),m=c(283),O=c(64),x=c(281),g=c(47),f=c.n(g),y=c(22),C=c(284),w=c(285),v=c(6),T={labelCol:{span:8},wrapperCol:{span:16}},F={wrapperCol:{offset:8,span:16}},I=function(e){var t=e.form,c=e.isModalVisible,a=e.handleOk,n=e.handleCancel;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(C.a,{title:"Create Chat Topic",centered:!0,visible:c,onOk:a,onCancel:n,footer:null,children:Object(v.jsx)(h.a,Object(y.a)(Object(y.a)({},T),{},{form:t,onFinish:a,children:Object(v.jsx)(p.a,{align:"middle",justify:"center",children:Object(v.jsxs)(u.a,{span:16,children:[Object(v.jsx)(h.a.Item,{label:"Topic Name",name:"topic",rules:[{required:!0,message:"Please input your topic name!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},F),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]})})}))})})},P="https://chat-app-api-1.herokuapp.com",S=c(158),k=c.n(S),q=c(280),N=c(279),_=w.a.TextArea,H={labelCol:{span:8},wrapperCol:{span:16}},L={wrapperCol:{offset:8,span:16}},A=function(){var e=Object(i.g)().slug,t=h.a.useForm(),c=Object(j.a)(t,1)[0],n=Object(a.useState)([]),s=Object(j.a)(n,2),r=s[0],o=s[1];Object(a.useEffect)((function(){k.a.createConsumer("ws://chat-app-api-1.herokuapp.com/cable").subscriptions.create({channel:"MessagesChannel",chatroom_slug:"messages_".concat(e)},{connected:function(){console.log("connected!")},disconnected:function(){console.log("disconnected")},received:function(e){console.log("socket data----------------",e),o((function(t){return[].concat(Object(l.a)(t),[e.message])}))}})}),[e]),Object(a.useEffect)((function(){f.a.get("".concat(P,"/chatrooms/").concat(e,"/messages")).then((function(e){var t=e.data.data;console.log("messages-------, ",t),o(t.messages)})).catch((function(e){console.log("err: ",e.response)}))}),[e]);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h3",{children:["Chat Room: ",e]}),Object(v.jsx)(q.b,{className:"comment-list",header:"".concat(r.length," replies"),itemLayout:"horizontal",dataSource:r,renderItem:function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(N.a,{actions:e.actions,author:e.user.username,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:e.content,datetime:e.created_at})})}}),Object(v.jsxs)(h.a,Object(y.a)(Object(y.a)({},H),{},{name:"basic",onFinish:function(t){console.log("Success:",t),f.a.post("".concat(P,"/chatrooms/").concat(e,"/messages"),{message:{content:t.content,user_id:2}}).then((function(e){console.log(e),console.log(e.data),c.resetFields()})).catch((function(e){console.log("err: ",e.response)}))},form:c,children:[Object(v.jsx)(h.a.Item,{name:"content",rules:[{required:!0,message:"Please input your message!"}],children:Object(v.jsx)(_,{rows:4})}),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},L),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:" Submit "})}))]}))]})},R=b.a.Header,V=b.a.Content,E=function(e){e.history;var t=Object(i.h)(),c=t.path,n=t.url,s=Object(a.useState)([]),r=Object(j.a)(s,2),g=r[0],y=r[1],C=h.a.useForm(),w=Object(j.a)(C,1)[0],T=Object(a.useState)(!1),F=Object(j.a)(T,2),S=F[0],k=F[1];Object(a.useEffect)((function(){f.a.get("".concat(P,"/chatrooms")).then((function(e){var t=e.data.data;y(t.rooms)})).catch((function(e){console.log("err: ",e.response)}))}),[]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(b.a,{children:[Object(v.jsx)(R,{children:Object(v.jsx)("div",{className:"logo"})}),Object(v.jsx)(V,{style:{padding:"0 50px",marginTop:64},children:Object(v.jsx)(p.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(v.jsxs)(u.a,{span:24,children:[Object(v.jsx)(m.a.Title,{children:"Welcome to Chat App"}),Object(v.jsxs)(p.a,{gutter:[16,16],align:"middle",justify:"center",children:[Object(v.jsxs)(u.a,{span:24,children:[Object(v.jsx)("h2",{children:"Chat Topic"}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){k(!0)},children:"Create Topic"}),Object(v.jsx)(I,{form:w,isModalVisible:S,handleOk:function(e){f.a.post("".concat(P,"/chatrooms"),{chatroom:e}).then((function(e){y((function(t){return[].concat(Object(l.a)(t),[e.data.data.chatroom])})),k(!1),w.resetFields(),d.a.info({description:"Success!",placement:"bottomRight"})})).catch((function(e){d.a.error({message:e.response.data.message,placement:"bottomRight"})}))},handleCancel:function(){k(!1)}})]}),Object(v.jsx)(u.a,{span:10,children:Object(v.jsx)(x.a,{children:Object(v.jsxs)("ul",{children:[g.length<=0&&Object(v.jsx)("h3",{children:" No topic found "}),g.map((function(e,t){return Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"".concat(n,"/").concat(e.slug),children:e.topic})},t)}))]})})}),Object(v.jsx)(u.a,{span:14,children:Object(v.jsx)(x.a,{children:Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{exact:!0,path:c,component:function(){return Object(v.jsx)("h3",{children:"Please select a chat topic."})}}),Object(v.jsx)(i.b,{path:"".concat(c,"/:slug"),component:A})]})})})]}),","]})})})]}),Object(v.jsx)(o.b,{to:"/",children:"Go Back"})]})},M=b.a.Header,B=b.a.Content,D={labelCol:{span:8},wrapperCol:{span:16}},W={wrapperCol:{offset:8,span:16}},z=function(e){var t=e.history;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(M,{children:Object(v.jsx)("div",{className:"logo"})}),Object(v.jsx)(B,{style:{padding:"0 50px",marginTop:64},children:Object(v.jsx)(p.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(v.jsxs)(u.a,{span:10,children:[Object(v.jsx)(m.a.Title,{children:"Welcome to Chat App"}),Object(v.jsxs)(h.a,Object(y.a)(Object(y.a)({},D),{},{name:"login-form",initialValues:{username:"test",password:"test"},onFinish:function(e){f.a.post("".concat(P,"/login"),{user:e}).then((function(e){t.push("/chat")})).catch((function(e){console.log("err: ",e.response)}))},children:[Object(v.jsx)(h.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(h.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(v.jsx)(w.a.Password,{})}),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},W),{},{children:Object(v.jsxs)(m.a.Paragraph,{children:["Don't you have an account?   ",Object(v.jsx)(o.b,{to:"/register",children:" Register here"})]})})),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},W),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Login"})}))]}))]})})})]})})},J=b.a.Header,U=b.a.Content,X={labelCol:{span:8},wrapperCol:{span:16}},G={wrapperCol:{offset:8,span:16}},Y=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(J,{children:Object(v.jsx)("div",{className:"logo"})}),Object(v.jsx)(U,{style:{padding:"0 50px",marginTop:64},children:Object(v.jsx)(p.a,{align:"middle",justify:"center",style:{minHeight:"300px"},children:Object(v.jsxs)(u.a,{span:18,children:[Object(v.jsx)(m.a.Title,{children:"Welcome to Chat App"}),Object(v.jsxs)(h.a,Object(y.a)(Object(y.a)({},X),{},{name:"basic",initialValues:{username:"test",password:"test",first_name:"hi",last_name:"there"},onFinish:function(e){console.log("Success:",e),f.a.post("".concat(P,"/signup"),{user:e}).then((function(e){console.log(e),console.log(e.data)})).catch((function(e){console.log("err: ",e.response)}))},children:[Object(v.jsx)(h.a.Item,{label:"First Name",name:"first_name",rules:[{required:!0,message:"Please input your first name!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(h.a.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,message:"Please input your last name!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(h.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(h.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(v.jsx)(w.a.Password,{})}),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},G),{},{children:Object(v.jsxs)(m.a.Paragraph,{children:["Already have an account?   ",Object(v.jsx)(o.b,{to:"/",children:" Login here"})]})})),Object(v.jsx)(h.a.Item,Object(y.a)(Object(y.a)({},G),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))]})})})]})})};var K=function(){return Object(v.jsx)(o.a,{children:Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{exact:!0,path:"/login",component:z}),Object(v.jsx)(i.b,{exact:!0,path:"/register",component:Y}),Object(v.jsx)(i.b,{path:"/chat",component:E}),Object(v.jsx)(i.a,{to:"/login",from:"/"}),Object(v.jsx)(i.b,{path:"*",exact:!0,component:z})]})})},Q=(c(276),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,287)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))});r.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(K,{})}),document.getElementById("root")),Q()}},[[277,1,2]]]);
//# sourceMappingURL=main.1ca36533.chunk.js.map